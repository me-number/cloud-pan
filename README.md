# OpenList - äº‘å­˜å‚¨èšåˆç®¡ç†ç³»ç»Ÿ

OpenList æ˜¯ä¸€ä¸ªåŸºäº Cloudflare Workers çš„ç°ä»£åŒ–äº‘å­˜å‚¨èšåˆç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§äº‘å­˜å‚¨æœåŠ¡çš„ç»Ÿä¸€ç®¡ç†ã€æ–‡ä»¶åˆ†äº«ã€åŠ å¯†å­˜å‚¨ç­‰åŠŸèƒ½ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸŒ å¤šäº‘å­˜å‚¨æ”¯æŒ
æ”¯æŒ 80+ ç§äº‘å­˜å‚¨é©±åŠ¨ï¼ŒåŒ…æ‹¬ï¼š
- **å›½å†…äº‘ç›˜**: é˜¿é‡Œäº‘ç›˜ã€ç™¾åº¦ç½‘ç›˜ã€å¤©ç¿¼äº‘ç›˜ã€115ç½‘ç›˜ã€123äº‘ç›˜ã€å¤¸å…‹ç½‘ç›˜ã€è¿…é›·äº‘ç›˜ã€ç§»åŠ¨äº‘ç›˜ç­‰
- **å›½é™…äº‘ç›˜**: Google Driveã€OneDriveã€Dropboxã€MEGAã€Yandex Disk ç­‰
- **å¯¹è±¡å­˜å‚¨**: AWS S3ã€Azure Blobã€é˜¿é‡Œäº‘ OSSã€åˆæ‹äº‘ USS ç­‰
- **è‡ªå»ºæœåŠ¡**: WebDAVã€FTPã€SFTPã€SMBã€Seafileã€Cloudreve ç­‰
- **ç‰¹æ®Šé©±åŠ¨**: æœ¬åœ°å­˜å‚¨ã€è™šæ‹Ÿç›®å½•ã€åŠ å¯†ç›®å½•ã€åˆ«åç›®å½•ç­‰

### ğŸ” å®‰å…¨ç‰¹æ€§
- **ç”¨æˆ·è®¤è¯**: JWT Token è®¤è¯ã€OAuth ç¬¬ä¸‰æ–¹ç™»å½•
- **æƒé™ç®¡ç†**: ç”¨æˆ·ç»„æƒé™ã€è·¯å¾„æƒé™ã€æ–‡ä»¶æƒé™æ§åˆ¶
- **åŠ å¯†å­˜å‚¨**: æ”¯æŒæ–‡ä»¶åŠ å¯†å­˜å‚¨ï¼Œå¤šç§åŠ å¯†æ¨¡å¼
- **å®‰å…¨åˆ†äº«**: å¯†ç ä¿æŠ¤ã€æœ‰æ•ˆæœŸé™åˆ¶ã€è®¿é—®ç»Ÿè®¡

### ğŸ“ æ–‡ä»¶ç®¡ç†
- **æ–‡ä»¶æ“ä½œ**: ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤ã€é‡å‘½åã€ç§»åŠ¨ã€å¤åˆ¶
- **ç›®å½•ç®¡ç†**: åˆ›å»ºã€åˆ é™¤ã€é‡å‘½åç›®å½•
- **æ–‡ä»¶é¢„è§ˆ**: æ”¯æŒå›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€æ–‡æ¡£é¢„è§ˆ
- **æ‰¹é‡æ“ä½œ**: æ‰¹é‡ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤
- **ç¦»çº¿ä¸‹è½½**: æ”¯æŒ HTTP/HTTPS ç¦»çº¿ä¸‹è½½åˆ°äº‘ç›˜

### ğŸ¯ é«˜çº§åŠŸèƒ½
- **è·¯å¾„æŒ‚è½½**: çµæ´»çš„è·¯å¾„æŒ‚è½½é…ç½®ï¼Œæ”¯æŒå¤šçº§ç›®å½•
- **ç¼“å­˜ç³»ç»Ÿ**: æ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼Œæå‡è®¿é—®é€Ÿåº¦
- **ä»£ç†æ¨¡å¼**: æ”¯æŒæ–‡ä»¶ä»£ç†ä¸‹è½½
- **ä»»åŠ¡ç®¡ç†**: å¼‚æ­¥ä»»åŠ¡å¤„ç†ï¼Œæ”¯æŒä»»åŠ¡é˜Ÿåˆ—
- **åˆ†äº«ç®¡ç†**: æ–‡ä»¶/ç›®å½•åˆ†äº«ï¼Œæ”¯æŒå¯†ç å’Œæœ‰æ•ˆæœŸ
- **å…ƒæ•°æ®é…ç½®**: è·¯å¾„çº§åˆ«çš„æƒé™ã€åŠ å¯†ã€ç¼“å­˜é…ç½®

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **è¿è¡Œç¯å¢ƒ**: Cloudflare Workers (Edge Computing)
- **Web æ¡†æ¶**: Hono.js (è½»é‡çº§é«˜æ€§èƒ½æ¡†æ¶)
- **æ•°æ®åº“**: Cloudflare D1 (SQLite) / æ”¯æŒ MySQLã€PostgreSQLã€MariaDB
- **ç¼“å­˜**: Cloudflare KV (å¯é€‰)
- **è¯­è¨€**: TypeScript
- **æ„å»ºå·¥å…·**: Wrangler, esbuild

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: React 19 + TypeScript
- **UI åº“**: Material-UI v7
- **è·¯ç”±**: React Router v7
- **çŠ¶æ€ç®¡ç†**: React Context API
- **HTTP å®¢æˆ·ç«¯**: Axios
- **æ„å»ºå·¥å…·**: Vite

### é¡¹ç›®ç»“æ„
```
OpenList-TSWorker/
â”œâ”€â”€ src/                      # åç«¯æºç 
â”‚   â”œâ”€â”€ admin/               # ç³»ç»Ÿç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ binds/               # OAuth ç»‘å®šç®¡ç†
â”‚   â”œâ”€â”€ crypt/               # åŠ å¯†é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ drive/               # äº‘å­˜å‚¨é©±åŠ¨
â”‚   â”‚   â”œâ”€â”€ alicloud/       # é˜¿é‡Œäº‘ç›˜é©±åŠ¨
â”‚   â”‚   â”œâ”€â”€ baiduyun/       # ç™¾åº¦ç½‘ç›˜é©±åŠ¨
â”‚   â”‚   â”œâ”€â”€ cloud189/       # å¤©ç¿¼äº‘ç›˜é©±åŠ¨
â”‚   â”‚   â”œâ”€â”€ goodrive/       # Google Drive é©±åŠ¨
â”‚   â”‚   â”œâ”€â”€ onedrive/       # OneDrive é©±åŠ¨
â”‚   â”‚   â””â”€â”€ ...             # å…¶ä»–é©±åŠ¨
â”‚   â”œâ”€â”€ fetch/               # ç¦»çº¿ä¸‹è½½ç®¡ç†
â”‚   â”œâ”€â”€ files/               # æ–‡ä»¶æ“ä½œç®¡ç†
â”‚   â”œâ”€â”€ group/               # ç”¨æˆ·ç»„ç®¡ç†
â”‚   â”œâ”€â”€ mates/               # å…ƒæ•°æ®é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ mount/               # æŒ‚è½½è·¯å¾„ç®¡ç†
â”‚   â”œâ”€â”€ oauth/               # OAuth è®¤è¯ç®¡ç†
â”‚   â”œâ”€â”€ saves/               # æ•°æ®æŒä¹…åŒ–
â”‚   â”œâ”€â”€ share/               # åˆ†äº«ç®¡ç†
â”‚   â”œâ”€â”€ system/              # ç³»ç»Ÿä¿¡æ¯
â”‚   â”œâ”€â”€ tasks/               # ä»»åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ token/               # Token ç®¡ç†
â”‚   â”œâ”€â”€ users/               # ç”¨æˆ·ç®¡ç†
â”‚   â””â”€â”€ index.ts            # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ pages/                   # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/       # å…¨å±€çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ layouts/        # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/       # API æœåŠ¡
â”‚   â”‚   â””â”€â”€ theme/          # ä¸»é¢˜é…ç½®
â”‚   â””â”€â”€ public/             # é™æ€èµ„æº
â”œâ”€â”€ drivers/                 # Go é©±åŠ¨æºç ï¼ˆå‚è€ƒï¼‰
â”œâ”€â”€ schema.sql              # æ•°æ®åº“ç»“æ„
â”œâ”€â”€ wrangler.jsonc          # Cloudflare Workers é…ç½®
â””â”€â”€ package.json            # é¡¹ç›®ä¾èµ–

```

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### å‰ç½®è¦æ±‚
- Node.js 18+ 
- npm æˆ– yarn
- Cloudflare è´¦å·ï¼ˆç”¨äºéƒ¨ç½²åˆ° Workersï¼‰

### æœ¬åœ°å¼€å‘

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/OpenListTeam/OpenList-TSWorker.git
cd OpenList-TSWorker
```

#### 2. å®‰è£…ä¾èµ–
```bash
# å®‰è£…åç«¯ä¾èµ–
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd pages
npm install
cd ..
```

#### 3. é…ç½®æ•°æ®åº“
```bash
# åˆ›å»ºæœ¬åœ° D1 æ•°æ®åº“ï¼ˆå¦‚æœä½¿ç”¨ Cloudflare D1ï¼‰
wrangler d1 create openlist-db

# å¯¼å…¥æ•°æ®åº“ç»“æ„
wrangler d1 execute openlist-db --file=./schema.sql
```

#### 4. é…ç½®ç¯å¢ƒ
ç¼–è¾‘ `wrangler.jsonc` æ–‡ä»¶ï¼š
```jsonc
{
  "name": "openlist-back-work",
  "main": "src/index.ts",
  "compatibility_date": "2025-08-16",
  "compatibility_flags": ["nodejs_compat"],
  "vars": {
    "ENABLE_D1": true,
    "REMOTE_D1": ""  // ç•™ç©ºä½¿ç”¨æœ¬åœ° D1ï¼Œæˆ–å¡«å†™è¿œç¨‹æ•°æ®åº“è¿æ¥
  },
  // é…ç½® KV å’Œ D1 ç»‘å®š
  "kv_namespaces": [{
    "binding": "KV_DATA",
    "id": "your-kv-namespace-id"  // æ›¿æ¢ä¸ºä½ çš„ KV ID
  }],
  "d1_databases": [{
    "binding": "D1_DATA",
    "database_name": "openlist-db",
    "database_id": "your-d1-database-id"  // æ›¿æ¢ä¸ºä½ çš„ D1 ID
  }]
}
```

#### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
# å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨
npm run dev

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev:pages
```

è®¿é—® `http://localhost:8086` æŸ¥çœ‹å‰ç«¯ç•Œé¢ã€‚

### ç”Ÿäº§éƒ¨ç½²

#### éƒ¨ç½²åˆ° Cloudflare Workers

1. **ç™»å½• Cloudflare**
```bash
wrangler login
```

2. **åˆ›å»ºç”Ÿäº§æ•°æ®åº“**
```bash
# åˆ›å»º KV å‘½åç©ºé—´
wrangler kv:namespace create "KV_DATA"

# åˆ›å»º D1 æ•°æ®åº“
wrangler d1 create openlist-prod-db

# å¯¼å…¥æ•°æ®åº“ç»“æ„
wrangler d1 execute openlist-prod-db --file=./schema.sql
```

3. **æ›´æ–°é…ç½®**
å°†ç”Ÿæˆçš„ KV ID å’Œ D1 ID æ›´æ–°åˆ° `wrangler.jsonc` ä¸­ã€‚

4. **ä¸€é”®éƒ¨ç½²ï¼ˆå‰ç«¯+åç«¯ï¼‰**
```bash
npm run deploy
```

è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ“ä½œï¼š
- æ„å»ºå‰ç«¯é¡¹ç›®åˆ° `public` ç›®å½•
- éƒ¨ç½²åç«¯å’Œå‰ç«¯åˆ° Cloudflare Workers

éƒ¨ç½²æˆåŠŸåï¼ŒCloudflare ä¼šæä¾›ä¸€ä¸ª Workers åŸŸåï¼Œä¾‹å¦‚ï¼š
`https://openlist-back-work.your-subdomain.workers.dev`

#### ä½¿ç”¨è‡ªå®šä¹‰åŸŸå

1. åœ¨ Cloudflare Dashboard ä¸­æ·»åŠ è‡ªå®šä¹‰åŸŸå
2. é…ç½® DNS è®°å½•æŒ‡å‘ Workers
3. å¯ç”¨ HTTPS

#### ä½¿ç”¨è¿œç¨‹æ•°æ®åº“

å¦‚æœä¸ä½¿ç”¨ Cloudflare D1ï¼Œå¯ä»¥ä½¿ç”¨è¿œç¨‹æ•°æ®åº“ï¼š

åœ¨ `wrangler.jsonc` ä¸­é…ç½®ï¼š
```jsonc
{
  "vars": {
    "ENABLE_D1": true,
    "REMOTE_D1": "mysql://username:password@host:port/database"
    // æ”¯æŒæ ¼å¼ï¼š
    // mysql://username:password@host:port/database
    // maria://username:password@host:port/database
    // pgsql://username:password@host:port/database
  }
}
```

### Docker éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦æœ¬åœ°éƒ¨ç½²è€Œéä½¿ç”¨ Cloudflare Workersï¼š

```bash
# ä½¿ç”¨ Node.js æœåŠ¡å™¨æ¨¡å¼
npm install @hono/node-server

# ä¿®æ”¹å…¥å£æ–‡ä»¶ä½¿ç”¨ Node.js é€‚é…å™¨
# ç„¶åæ„å»º Docker é•œåƒ
docker build -t openlist .
docker run -p 8080:8080 openlist
```

## ğŸ”§ é…ç½®è¯´æ˜

### æ•°æ®åº“é…ç½®
ç³»ç»Ÿæ”¯æŒå¤šç§æ•°æ®åº“ï¼š
- **Cloudflare D1**: æ¨èç”¨äº Workers éƒ¨ç½²
- **MySQL/MariaDB**: é€‚åˆè‡ªå»ºæœåŠ¡å™¨
- **PostgreSQL**: é€‚åˆå¤§è§„æ¨¡éƒ¨ç½²

### å­˜å‚¨é…ç½®
- **KV å­˜å‚¨**: ç”¨äºç¼“å­˜å’Œä¼šè¯ç®¡ç†ï¼ˆå¯é€‰ï¼‰
- **D1 å­˜å‚¨**: ç”¨äºæŒä¹…åŒ–æ•°æ®å­˜å‚¨

### ç¯å¢ƒå˜é‡
```bash
ENABLE_D1=true          # æ˜¯å¦å¯ç”¨ D1 æ•°æ®åº“
REMOTE_D1=              # è¿œç¨‹æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
```

## ğŸ“– API æ–‡æ¡£

### è®¤è¯æ¥å£
- `POST /@users/login/none` - ç”¨æˆ·ç™»å½•
- `POST /@users/logout/none` - ç”¨æˆ·ç™»å‡º
- `POST /@users/create/none` - åˆ›å»ºç”¨æˆ·
- `GET /@users/select/none` - æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨

### æ–‡ä»¶æ¥å£
- `GET /@files/list/path/*` - åˆ—å‡ºæ–‡ä»¶
- `POST /@files/upload/path/*` - ä¸Šä¼ æ–‡ä»¶
- `GET /@files/download/path/*` - ä¸‹è½½æ–‡ä»¶
- `DELETE /@files/delete/path/*` - åˆ é™¤æ–‡ä»¶
- `POST /@files/move/path/*` - ç§»åŠ¨æ–‡ä»¶
- `POST /@files/copy/path/*` - å¤åˆ¶æ–‡ä»¶

### æŒ‚è½½æ¥å£
- `GET /@mount/select/none` - æŸ¥è¯¢æŒ‚è½½åˆ—è¡¨
- `POST /@mount/config/none` - é…ç½®æŒ‚è½½
- `DELETE /@mount/remove/none` - åˆ é™¤æŒ‚è½½
- `PUT /@mount/status/none` - åˆ‡æ¢æŒ‚è½½çŠ¶æ€

### åˆ†äº«æ¥å£
- `POST /@share/create/none` - åˆ›å»ºåˆ†äº«
- `GET /@share/select/uuid` - æŸ¥è¯¢åˆ†äº«
- `DELETE /@share/remove/uuid` - åˆ é™¤åˆ†äº«
- `GET /@share/access/uuid` - è®¿é—®åˆ†äº«

### ä»»åŠ¡æ¥å£
- `GET /@tasks/select/user` - æŸ¥è¯¢ç”¨æˆ·ä»»åŠ¡
- `POST /@tasks/create/none` - åˆ›å»ºä»»åŠ¡
- `PUT /@tasks/status/none` - æ›´æ–°ä»»åŠ¡çŠ¶æ€

### ç³»ç»Ÿæ¥å£
- `GET /@system/info/none` - è·å–ç³»ç»Ÿä¿¡æ¯

è¯¦ç»† API æ–‡æ¡£è¯·å‚è€ƒä»£ç ä¸­çš„æ³¨é‡Šã€‚

## ğŸ¨ å‰ç«¯ä½¿ç”¨

å‰ç«¯é¡¹ç›®è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹ [pages/README.md](pages/README.md)

### å¿«é€Ÿå¼€å§‹
```bash
cd pages
npm install
npm run dev
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

æ„å»ºäº§ç‰©åœ¨ `pages/dist` ç›®å½•ï¼Œå¯ä»¥éƒ¨ç½²åˆ°ä»»ä½•é™æ€æ‰˜ç®¡æœåŠ¡ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [GNU Affero General Public License v3.0](LICENSE) å¼€æºã€‚

## ğŸ™ è‡´è°¢

- [Hono.js](https://hono.dev/) - è½»é‡çº§ Web æ¡†æ¶
- [Cloudflare Workers](https://workers.cloudflare.com/) - Edge Computing å¹³å°
- [React](https://react.dev/) - å‰ç«¯æ¡†æ¶
- [Material-UI](https://mui.com/) - UI ç»„ä»¶åº“
- æ‰€æœ‰è´¡çŒ®è€…å’Œæ”¯æŒè€…

## ğŸ“ è”ç³»æ–¹å¼

- GitHub Issues: [æäº¤é—®é¢˜](https://github.com/OpenListTeam/OpenList-TSWorker/issues)
- é¡¹ç›®ä¸»é¡µ: [OpenList](https://github.com/OpenListTeam)

## ğŸ—ºï¸ è·¯çº¿å›¾

- [ ] æ”¯æŒæ›´å¤šäº‘å­˜å‚¨é©±åŠ¨
- [ ] ç§»åŠ¨ç«¯ App
- [ ] æ–‡ä»¶åœ¨çº¿ç¼–è¾‘
- [ ] è§†é¢‘è½¬ç 
- [ ] å…¨æ–‡æœç´¢
- [ ] WebSocket å®æ—¶é€šçŸ¥
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] æ’ä»¶ç³»ç»Ÿ

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»åœ¨ç§¯æå¼€å‘ä¸­ï¼ŒAPI å¯èƒ½ä¼šæœ‰å˜åŠ¨ã€‚ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è¯·è°¨æ…è¯„ä¼°ã€‚
